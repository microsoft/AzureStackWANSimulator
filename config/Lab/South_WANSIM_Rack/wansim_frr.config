# Configuration
!
frr version 8.1
frr defaults traditional
hostname WANSIM-asrr1s45r0701
log syslog informational
no ipv6 forwarding
service integrated-vtysh-config
!
ip route 100.69.177.0/25 gre1
ip route 100.69.177.0/25 gre2
ip route 100.69.177.128/25 gre1
ip route 100.69.177.128/25 gre2
ip route 100.69.178.0/25 gre1
ip route 100.69.178.0/25 gre2
ip route 100.69.178.128/25 gre1
ip route 100.69.178.128/25 gre2
!
router bgp 64898
 bgp router-id 10.10.32.193
 bgp suppress-fib-pending
 bgp log-neighbor-changes
 no bgp ebgp-requires-policy
 no bgp default ipv4-unicast
 neighbor 3.1.1.1 remote-as 65242
 neighbor 3.1.1.1 description To_TOR1
 neighbor 3.1.1.1 ebgp-multihop 8
 neighbor 3.1.1.1 update-source gre1
 neighbor 3.1.1.3 remote-as 65242
 neighbor 3.1.1.3 description To_TOR2
 neighbor 3.1.1.3 ebgp-multihop 8
 neighbor 3.1.1.3 update-source gre2
 neighbor 10.10.37.2 remote-as 64817
 neighbor 10.10.37.2 description To_Uplink_TOR1
 neighbor 10.10.37.2 ebgp-multihop 3
 neighbor 10.10.37.2 update-source eth0
 neighbor 10.10.37.3 remote-as 64817
 neighbor 10.10.37.3 description To_Uplink_TOR2
 neighbor 10.10.37.3 ebgp-multihop 3
 neighbor 10.10.37.3 update-source eth0
 !
 address-family ipv4 unicast
  network 10.10.32.193/32
  redistribute static
  neighbor 3.1.1.1 activate
  neighbor 3.1.1.1 default-originate
  neighbor 3.1.1.1 route-map rm-in in
  neighbor 3.1.1.1 route-map rm-default-out out
  neighbor 3.1.1.3 activate
  neighbor 3.1.1.3 default-originate
  neighbor 3.1.1.3 route-map rm-in in
  neighbor 3.1.1.3 route-map rm-default-out out
  neighbor 10.10.37.2 activate
  neighbor 10.10.37.2 route-map rm-default-in in
  neighbor 10.10.37.3 activate
  neighbor 10.10.37.3 route-map rm-default-in in
 exit-address-family
exit
!
ip prefix-list pl-default seq 10 permit 0.0.0.0/0
ip prefix-list pl-all seq 10 permit any
!
route-map rm-default-out permit 10
 match ip address prefix-list pl-default
exit
!
route-map rm-default-in permit 10
 match ip address prefix-list pl-default
exit
!
route-map rm-in deny 10
 match ip address prefix-list pl-all
exit
!
end


# Show Commands
## show ip bgp summary
IPv4 Unicast Summary (VRF default):
BGP router identifier 10.10.32.193, local AS number 64898 vrf-id 0
BGP table version 33
RIB entries 10, using 1840 bytes of memory
Peers 4, using 2892 KiB of memory

Neighbor        V         AS   MsgRcvd   MsgSent   TblVer  InQ OutQ  Up/Down State/PfxRcd   PfxSnt Desc
3.1.1.1         4      65242      1379      1356        0    0    0 20:08:25            0        1 To_TOR1
3.1.1.3         4      65242      1376      1356        0    0    0 20:08:25            0        1 To_TOR2
10.10.37.2      4      64817      8303      9188        0    0    0 20:08:36            1        5 To_Uplink_TOR1
10.10.37.3      4      64817      8330      9121        0    0    0 20:08:35            1        5 To_Uplink_TOR2

Total number of neighbors 4


## show ip bgp
BGP table version is 33, local router ID is 10.10.32.193, vrf id 0
Default local pref 100, local AS 64898
Status codes:  s suppressed, d damped, h history, * valid, > best, = multipath,
               i internal, r RIB-failure, S Stale, R Removed
Nexthop codes: @NNN nexthop's vrf id, < announce-nh-self
Origin codes:  i - IGP, e - EGP, ? - incomplete
RPKI validation codes: V valid, I invalid, N Not found

   Network          Next Hop            Metric LocPrf Weight Path
*= 0.0.0.0/0        10.10.37.3                             0 64817 64904 64800 ?
*>                  10.10.37.2                             0 64817 64904 64800 ?
*> 10.10.32.193/32  0.0.0.0                  0         32768 i
*> 100.69.177.0/25  0.0.0.0                  0         32768 ?
*> 100.69.177.128/25
                    0.0.0.0                  0         32768 ?
*> 100.69.178.0/25  0.0.0.0                  0         32768 ?
*> 100.69.178.128/25
                    0.0.0.0                  0         32768 ?

Displayed  6 routes and 7 total paths
